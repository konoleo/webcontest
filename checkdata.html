<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="utf-8">
	<title>問題文のチェック</title>
	<meta name="robots" content="noindex">
</head>
<body>
</body>
<script>
	const allKanji = ["亜", "哀", "挨", "愛", "曖", "悪", "握", "圧", "扱", "宛", "嵐", "安", "案", "暗", "以", "衣", "位", "囲", "医", "依", "委", "威", "為", "畏", "胃", "尉", "異", "移", "萎", "偉", "椅", "彙", "意", "違", "維", "慰", "遺", "緯", "域", "育", "一", "壱", "逸", "茨", "芋", "引", "印", "因", "咽", "姻", "員", "院", "淫", "陰", "飲", "隠", "韻", "右", "宇", "羽", "雨", "唄", "鬱", "畝", "浦", "運", "雲", "永", "泳", "英", "映", "栄", "営", "詠", "影", "鋭", "衛", "易", "疫", "益", "液", "駅", "悦", "越", "謁", "閲", "円", "延", "沿", "炎", "怨", "宴", "媛", "援", "園", "煙", "猿", "遠", "鉛", "塩", "演", "縁", "艶", "汚", "王", "凹", "央", "応", "往", "押", "旺", "欧", "殴", "桜", "翁", "奥", "横", "岡", "屋", "億", "憶", "臆", "虞", "乙", "俺", "卸", "音", "恩", "温", "穏", "下", "化", "火", "加", "可", "仮", "何", "花", "佳", "価", "果", "河", "苛", "科", "架", "夏", "家", "荷", "華", "菓", "貨", "渦", "過", "嫁", "暇", "禍", "靴", "寡", "歌", "箇", "稼", "課", "蚊", "牙", "瓦", "我", "画", "芽", "賀", "雅", "餓", "介", "回", "灰", "会", "快", "戒", "改", "怪", "拐", "悔", "海", "界", "皆", "械", "絵", "開", "階", "塊", "楷", "解", "潰", "壊", "懐", "諧", "貝", "外", "劾", "害", "崖", "涯", "街", "慨", "蓋", "該", "概", "骸", "垣", "柿", "各", "角", "拡", "革", "格", "核", "殻", "郭", "覚", "較", "隔", "閣", "確", "獲", "嚇", "穫", "学", "岳", "楽", "額", "顎", "掛", "潟", "括", "活", "喝", "渇", "割", "葛", "滑", "褐", "轄", "且", "株", "釜", "鎌", "刈", "干", "刊", "甘", "汗", "缶", "完", "肝", "官", "冠", "巻", "看", "陥", "乾", "勘", "患", "貫", "寒", "喚", "堪", "換", "敢", "棺", "款", "間", "閑", "勧", "寛", "幹", "感", "漢", "慣", "管", "関", "歓", "監", "緩", "憾", "還", "館", "環", "簡", "観", "韓", "艦", "鑑", "丸", "含", "岸", "岩", "玩", "眼", "頑", "顔", "願", "企", "伎", "危", "机", "気", "岐", "希", "忌", "汽", "奇", "祈", "季", "紀", "軌", "既", "記", "起", "飢", "鬼", "帰", "基", "寄", "規", "亀", "喜", "幾", "揮", "期", "棋", "貴", "棄", "毀", "旗", "器", "畿", "輝", "機", "騎", "技", "宜", "偽", "欺", "義", "疑", "儀", "戯", "擬", "犠", "議", "菊", "吉", "喫", "詰", "却", "客", "脚", "逆", "虐", "九", "久", "及", "弓", "丘", "旧", "休", "吸", "朽", "臼", "求", "究", "泣", "急", "級", "糾", "宮", "救", "球", "給", "嗅", "窮", "牛", "去", "巨", "居", "拒", "拠", "挙", "虚", "許", "距", "魚", "御", "漁", "凶", "共", "叫", "狂", "京", "享", "供", "協", "況", "峡", "挟", "狭", "恐", "恭", "胸", "脅", "強", "教", "郷", "境", "橋", "矯", "鏡", "競", "響", "驚", "仰", "暁", "業", "凝", "曲", "局", "極", "玉", "巾", "斤", "均", "近", "金", "菌", "勤", "琴", "筋", "僅", "禁", "緊", "錦", "謹", "襟", "吟", "銀", "区", "句", "苦", "駆", "具", "惧", "愚", "空", "偶", "遇", "隅", "串", "屈", "掘", "窟", "熊", "繰", "君", "訓", "勲", "薫", "軍", "郡", "群", "兄", "刑", "形", "系", "径", "茎", "係", "型", "契", "計", "恵", "啓", "掲", "渓", "経", "蛍", "敬", "景", "軽", "傾", "携", "継", "詣", "慶", "憬", "稽", "憩", "警", "鶏", "芸", "迎", "鯨", "隙", "劇", "撃", "激", "桁", "欠", "穴", "血", "決", "結", "傑", "潔", "月", "犬", "件", "見", "券", "肩", "建", "研", "県", "倹", "兼", "剣", "拳", "軒", "健", "険", "圏", "堅", "検", "嫌", "献", "絹", "遣", "権", "憲", "賢", "謙", "鍵", "繭", "顕", "験", "懸", "元", "幻", "玄", "言", "弦", "限", "原", "現", "舷", "減", "源", "厳", "己", "戸", "古", "呼", "固", "股", "虎", "孤", "弧", "故", "枯", "個", "庫", "湖", "雇", "誇", "鼓", "錮", "顧", "五", "互", "午", "呉", "後", "娯", "悟", "碁", "語", "誤", "護", "口", "工", "公", "勾", "孔", "功", "巧", "広", "甲", "交", "光", "向", "后", "好", "江", "考", "行", "坑", "孝", "抗", "攻", "更", "効", "幸", "拘", "肯", "侯", "厚", "恒", "洪", "皇", "紅", "荒", "郊", "香", "候", "校", "耕", "航", "貢", "降", "高", "康", "控", "梗", "黄", "喉", "慌", "港", "硬", "絞", "項", "溝", "鉱", "構", "綱", "酵", "稿", "興", "衡", "鋼", "講", "購", "乞", "号", "合", "拷", "剛", "傲", "豪", "克", "告", "谷", "刻", "国", "黒", "穀", "酷", "獄", "骨", "駒", "込", "頃", "今", "困", "昆", "恨", "根", "婚", "混", "痕", "紺", "魂", "墾", "懇", "左", "佐", "沙", "査", "砂", "唆", "差", "詐", "鎖", "座", "挫", "才", "再", "災", "妻", "采", "砕", "宰", "栽", "彩", "採", "済", "祭", "斎", "細", "菜", "最", "裁", "債", "催", "塞", "歳", "載", "際", "埼", "在", "材", "剤", "財", "罪", "崎", "作", "削", "昨", "柵", "索", "策", "酢", "搾", "錯", "咲", "冊", "札", "刷", "刹", "拶", "殺", "察", "撮", "擦", "雑", "皿", "三", "山", "参", "桟", "蚕", "惨", "産", "傘", "散", "算", "酸", "賛", "残", "斬", "暫", "士", "子", "支", "止", "氏", "仕", "史", "司", "四", "市", "矢", "旨", "死", "糸", "至", "伺", "志", "私", "使", "刺", "始", "姉", "枝", "祉", "肢", "姿", "思", "指", "施", "師", "恣", "紙", "脂", "視", "紫", "詞", "歯", "嗣", "試", "詩", "資", "飼", "誌", "雌", "摯", "賜", "諮", "示", "字", "寺", "次", "耳", "自", "似", "児", "事", "侍", "治", "持", "時", "滋", "慈", "辞", "磁", "餌", "璽", "鹿", "式", "識", "軸", "七", "𠮟", "叱", "失", "室", "疾", "執", "湿", "嫉", "漆", "質", "実", "芝", "写", "社", "車", "舎", "者", "射", "捨", "赦", "斜", "煮", "遮", "謝", "邪", "蛇", "尺", "借", "酌", "釈", "爵", "若", "弱", "寂", "手", "主", "守", "朱", "取", "狩", "首", "殊", "珠", "酒", "腫", "種", "趣", "寿", "受", "呪", "授", "需", "儒", "樹", "収", "囚", "州", "舟", "秀", "周", "宗", "拾", "秋", "臭", "修", "袖", "終", "羞", "習", "週", "就", "衆", "集", "愁", "酬", "醜", "蹴", "襲", "十", "汁", "充", "住", "柔", "重", "従", "渋", "銃", "獣", "縦", "叔", "祝", "宿", "淑", "粛", "縮", "塾", "熟", "出", "述", "術", "俊", "春", "瞬", "旬", "巡", "盾", "准", "殉", "純", "循", "順", "準", "潤", "遵", "処", "初", "所", "書", "庶", "暑", "署", "緒", "諸", "女", "如", "助", "序", "叙", "徐", "除", "小", "升", "少", "召", "匠", "床", "抄", "肖", "尚", "招", "承", "昇", "松", "沼", "昭", "宵", "将", "消", "症", "祥", "称", "笑", "唱", "商", "渉", "章", "紹", "訟", "勝", "掌", "晶", "焼", "焦", "硝", "粧", "詔", "証", "象", "傷", "奨", "照", "詳", "彰", "障", "憧", "衝", "賞", "償", "礁", "鐘", "上", "丈", "冗", "条", "状", "乗", "城", "浄", "剰", "常", "情", "場", "畳", "蒸", "縄", "壌", "嬢", "錠", "譲", "醸", "色", "拭", "食", "植", "殖", "飾", "触", "嘱", "織", "職", "辱", "尻", "心", "申", "伸", "臣", "芯", "身", "辛", "侵", "信", "津", "神", "唇", "娠", "振", "浸", "真", "針", "深", "紳", "進", "森", "診", "寝", "慎", "新", "審", "震", "薪", "親", "人", "刃", "仁", "尽", "迅", "甚", "陣", "尋", "腎", "須", "図", "水", "吹", "垂", "炊", "帥", "粋", "衰", "推", "酔", "遂", "睡", "穂", "随", "髄", "枢", "崇", "数", "据", "杉", "裾", "寸", "瀬", "是", "井", "世", "正", "生", "成", "西", "声", "制", "姓", "征", "性", "青", "斉", "政", "星", "牲", "省", "凄", "逝", "清", "盛", "婿", "晴", "勢", "聖", "誠", "精", "製", "誓", "静", "請", "整", "醒", "税", "夕", "斥", "石", "赤", "昔", "析", "席", "脊", "隻", "惜", "戚", "責", "跡", "積", "績", "籍", "切", "折", "拙", "窃", "接", "設", "雪", "摂", "節", "説", "舌", "絶", "千", "川", "仙", "占", "先", "宣", "専", "泉", "浅", "洗", "染", "扇", "栓", "旋", "船", "戦", "煎", "羨", "腺", "詮", "践", "箋", "銭", "潜", "線", "遷", "選", "薦", "繊", "鮮", "全", "前", "善", "然", "禅", "漸", "膳", "繕", "狙", "阻", "祖", "租", "素", "措", "粗", "組", "疎", "訴", "塑", "遡", "礎", "双", "壮", "早", "争", "走", "奏", "相", "荘", "草", "送", "倉", "捜", "挿", "桑", "巣", "掃", "曹", "曽", "爽", "窓", "創", "喪", "痩", "葬", "装", "僧", "想", "層", "総", "遭", "槽", "踪", "操", "燥", "霜", "騒", "藻", "造", "像", "増", "憎", "蔵", "贈", "臓", "即", "束", "足", "促", "則", "息", "捉", "速", "側", "測", "俗", "族", "属", "賊", "続", "卒", "率", "存", "村", "孫", "尊", "損", "遜", "他", "多", "汰", "打", "妥", "唾", "堕", "惰", "駄", "太", "対", "体", "耐", "待", "怠", "胎", "退", "帯", "泰", "堆", "袋", "逮", "替", "貸", "隊", "滞", "態", "戴", "大", "代", "台", "第", "題", "滝", "宅", "択", "沢", "卓", "拓", "託", "濯", "諾", "濁", "但", "達", "脱", "奪", "棚", "誰", "丹", "旦", "担", "単", "炭", "胆", "探", "淡", "短", "嘆", "端", "綻", "誕", "鍛", "団", "男", "段", "断", "弾", "暖", "談", "壇", "地", "池", "知", "値", "恥", "致", "遅", "痴", "稚", "置", "緻", "竹", "畜", "逐", "蓄", "築", "秩", "窒", "茶", "着", "嫡", "中", "仲", "虫", "沖", "宙", "忠", "抽", "注", "昼", "柱", "衷", "酎", "鋳", "駐", "著", "貯", "丁", "弔", "庁", "兆", "町", "長", "挑", "帳", "張", "彫", "眺", "釣", "頂", "鳥", "朝", "貼", "超", "腸", "跳", "徴", "嘲", "潮", "澄", "調", "聴", "懲", "直", "勅", "捗", "沈", "珍", "朕", "陳", "賃", "鎮", "追", "椎", "墜", "通", "痛", "塚", "漬", "坪", "爪", "鶴", "低", "呈", "廷", "弟", "定", "底", "抵", "邸", "亭", "貞", "帝", "訂", "庭", "逓", "停", "偵", "堤", "提", "程", "艇", "締", "諦", "泥", "的", "笛", "摘", "滴", "適", "敵", "溺", "迭", "哲", "鉄", "徹", "撤", "天", "典", "店", "点", "展", "添", "転", "塡", "田", "伝", "殿", "電", "斗", "吐", "妬", "徒", "途", "都", "渡", "塗", "賭", "土", "奴", "努", "度", "怒", "刀", "冬", "灯", "当", "投", "豆", "東", "到", "逃", "倒", "凍", "唐", "島", "桃", "討", "透", "党", "悼", "盗", "陶", "塔", "搭", "棟", "湯", "痘", "登", "答", "等", "筒", "統", "稲", "踏", "糖", "頭", "謄", "藤", "闘", "騰", "同", "洞", "胴", "動", "堂", "童", "道", "働", "銅", "導", "瞳", "峠", "匿", "特", "得", "督", "徳", "篤", "毒", "独", "読", "栃", "凸", "突", "届", "屯", "豚", "頓", "貪", "鈍", "曇", "丼", "那", "奈", "内", "梨", "謎", "鍋", "南", "軟", "難", "二", "尼", "弐", "匂", "肉", "虹", "日", "入", "乳", "尿", "任", "妊", "忍", "認", "寧", "熱", "年", "念", "捻", "粘", "燃", "悩", "納", "能", "脳", "農", "濃", "把", "波", "派", "破", "覇", "馬", "婆", "罵", "拝", "杯", "背", "肺", "俳", "配", "排", "敗", "廃", "輩", "売", "倍", "梅", "培", "陪", "媒", "買", "賠", "白", "伯", "拍", "泊", "迫", "剝", "舶", "博", "薄", "麦", "漠", "縛", "爆", "箱", "箸", "畑", "肌", "八", "鉢", "発", "髪", "伐", "抜", "罰", "閥", "反", "半", "氾", "犯", "帆", "汎", "伴", "判", "坂", "阪", "板", "版", "班", "畔", "般", "販", "斑", "飯", "搬", "煩", "頒", "範", "繁", "藩", "晩", "番", "蛮", "盤", "比", "皮", "妃", "否", "批", "彼", "披", "肥", "非", "卑", "飛", "疲", "秘", "被", "悲", "扉", "費", "碑", "罷", "避", "尾", "眉", "美", "備", "微", "鼻", "膝", "肘", "匹", "必", "泌", "筆", "姫", "百", "氷", "表", "俵", "票", "評", "漂", "標", "苗", "秒", "病", "描", "猫", "品", "浜", "貧", "賓", "頻", "敏", "瓶", "不", "夫", "父", "付", "布", "扶", "府", "怖", "阜", "附", "訃", "負", "赴", "浮", "婦", "符", "富", "普", "腐", "敷", "膚", "賦", "譜", "侮", "武", "部", "舞", "封", "風", "伏", "服", "副", "幅", "復", "福", "腹", "複", "覆", "払", "沸", "仏", "物", "粉", "紛", "雰", "噴", "墳", "憤", "奮", "分", "文", "聞", "丙", "平", "兵", "併", "並", "柄", "陛", "閉", "塀", "幣", "弊", "蔽", "餅", "米", "壁", "璧", "癖", "別", "蔑", "片", "辺", "返", "変", "偏", "遍", "編", "弁", "便", "勉", "歩", "保", "哺", "捕", "補", "舗", "母", "募", "墓", "慕", "暮", "簿", "方", "包", "芳", "邦", "奉", "宝", "抱", "放", "法", "泡", "胞", "俸", "倣", "峰", "砲", "崩", "訪", "報", "蜂", "豊", "飽", "褒", "縫", "亡", "乏", "忙", "坊", "妨", "忘", "防", "房", "肪", "某", "冒", "剖", "紡", "望", "傍", "帽", "棒", "貿", "貌", "暴", "膨", "謀", "頰", "北", "木", "朴", "牧", "睦", "僕", "墨", "撲", "没", "勃", "堀", "本", "奔", "翻", "凡", "盆", "麻", "摩", "磨", "魔", "毎", "妹", "枚", "昧", "埋", "幕", "膜", "枕", "又", "末", "抹", "万", "満", "慢", "漫", "未", "味", "魅", "岬", "密", "蜜", "脈", "妙", "民", "眠", "矛", "務", "無", "夢", "霧", "娘", "名", "命", "明", "迷", "冥", "盟", "銘", "鳴", "滅", "免", "面", "綿", "麺", "茂", "模", "毛", "妄", "盲", "耗", "猛", "網", "目", "黙", "門", "紋", "問", "冶", "夜", "野", "弥", "厄", "役", "約", "訳", "薬", "躍", "闇", "由", "油", "喩", "愉", "諭", "輸", "癒", "唯", "友", "有", "勇", "幽", "悠", "郵", "湧", "猶", "裕", "遊", "雄", "誘", "憂", "融", "優", "与", "予", "余", "誉", "預", "幼", "用", "羊", "妖", "洋", "要", "容", "庸", "揚", "揺", "葉", "陽", "溶", "腰", "様", "瘍", "踊", "窯", "養", "擁", "謡", "曜", "抑", "沃", "浴", "欲", "翌", "翼", "拉", "裸", "羅", "来", "雷", "頼", "絡", "落", "酪", "辣", "乱", "卵", "覧", "濫", "藍", "欄", "吏", "利", "里", "理", "痢", "裏", "履", "璃", "離", "陸", "立", "律", "慄", "略", "柳", "流", "留", "竜", "粒", "隆", "硫", "侶", "旅", "虜", "慮", "了", "両", "良", "料", "涼", "猟", "陵", "量", "僚", "領", "寮", "療", "瞭", "糧", "力", "緑", "林", "厘", "倫", "輪", "隣", "臨", "瑠", "涙", "累", "塁", "類", "令", "礼", "冷", "励", "戻", "例", "鈴", "零", "霊", "隷", "齢", "麗", "暦", "歴", "列", "劣", "烈", "裂", "恋", "連", "廉", "練", "錬", "呂", "炉", "賂", "路", "露", "老", "労", "弄", "郎", "朗", "浪", "廊", "楼", "漏", "籠", "六", "録", "麓", "論", "和", "話", "賄", "脇", "惑", "枠", "湾", "腕"];

	fetch("data/test.json").then(response => {
		if (response.ok) {
			return response.json();
		} else {
			return Promise.reject(new Error("JSONファイルにアクセスできません。"));
		}
	}).then(jsonData => {
		const newData = {};
		Object.entries(jsonData).forEach(([kanji, data1]) => {
			if (data1.readings) {
				data1.readings.forEach(data2 => {
					data2.strokesNum = data1.strokesNum;
					data2.readingForSort = data1.readingForSort;
					const key = `${kanji}${data2.reading ? "（" + data2.reading + "）" : ""}`;
					newData[key] = data2;
				});
			} else {
				if (data1.isUniqueReading) {
					const newQuizzes = [];
					data1.quizzes.forEach(quiz => {
						quiz.phrase.forEach((item, i) => {
							if (item.answer) {
								const answer = item.answer;
								[...Array(item.answer.length)].forEach((_, t) => {
									const newQuiz = JSON.parse(JSON.stringify(quiz));
									const newAnswerArr = [];
									const before = answer.substr(0, t);
									const newAnswer = answer.substr(t, t + 1);
									const after = answer.substr(t + 1);
									if (before !== "") {
										newAnswerArr.push({"text": before});
									}
									newAnswerArr.push({"answer": newAnswer});
									if (after !== "") {
										newAnswerArr.push({"text": after});
									}
									newQuiz.phrase[i].answer = newAnswerArr;
									newQuizzes.push(newQuiz);
								});
							}
						});
					});
					data1.quizzes = newQuizzes;
				}
				newData[kanji] = data1;
			}
		});
		return [newData, jsonData];
	}).then(datas => {
		const kanjiData = datas[0];
		const jsonData = datas[1];

		// 全ての学習年をデータから取得
		const allGrades = [...new Set(Object.values(kanjiData).map(elem => elem.studyGrade))].sort((a, b) => a - b);

		// 学習年で漢字をフィルター
		function filterByYear(year) {
			const kanjiArr = [];
			Object.keys(kanjiData).forEach(element => {
				if (year.includes(kanjiData[element].studyGrade)) {
					kanjiArr.push(element);
				}
			});
			return kanjiArr;
		}
		const sameStudyGrade = [];
		const notHasOkurigana = [];
		const hasHiragana = [];
		const manyAnswer = [];
		const manyCharacter = [];
		const notYetStudiedReading = Object.keys(jsonData).reduce((acc, value) => {
			acc[value] = [];
			return acc;
		}, {});
		const notYetStudied = [];
		const invalidData = [];
		const studiedKanji = filterByYear([1, 2, 3, 4]);
		const notStudiedKanji = allKanji.filter(kanji => !studiedKanji.includes(kanji));

		Object.entries(kanjiData).forEach(([kanji, data]) => {
			const matched = kanji.match(/^(.)（/);
			if (!data.studyGrade || !data.readingForSort || (kanji.length === 1 && data.isUniqueReading && !data.strokesNum) || !(data.strokesNum || data.isUniqueReading) || (data.strokesNum && data.isUniqueReading)) {
				invalidData.push(kanji);
			}
			if (matched && data.studyGrade === kanjiData[matched[1]].studyGrade) {
				sameStudyGrade.push(kanji);
			}
			data.quizzes.forEach(quiz => {
				let phrase = "";
				let textInSpecialReading = "";
				let answerKanji;
				quiz.phrase.forEach(item => {
					if (quiz.hasOkurigana === true) {
						// 送り仮名を書かせる問題
						if (item.answer) {
							if (!/[ぁ-んー]/.test(item.answer)) {
								notHasOkurigana.push([kanji, item]);
							}
							answerKanji = item.answer[0];
						}
						phrase += item.text || item.reading;
					} else {
						// 単語を書かせる問題
						if (item.answer) {
							var answer = "";
							if (typeof item.answer === "object") {
								answer = item.answer.filter(a => a.answer)[0].answer;
								item.answer.filter(a => a.text).forEach(elem => {
									textInSpecialReading += elem.text;
								});
							} else {
								answer = item.answer;
							}
							if (/[ぁ-んー]/.test(answer)) {
								hasHiragana.push([kanji, item]);
							}
							if (answer.length !== 1 && !data.isUniqueReading) {
								manyAnswer.push([kanji, item]);
							}
							answerKanji = answer[0];
						} else {
							phrase += item.text;
						}
					}
				});
				const kanjisInPhrase = phrase.match(/[一-齢]/g);
				if (kanjisInPhrase) {
					const higherGrades = allGrades.filter(num => num >= data.studyGrade);
					let higherGradesKanji = filterByYear(higherGrades).concat(notStudiedKanji);
					let higherGradesReading = higherGradesKanji;
					higherGradesKanji = higherGradesKanji.filter(kanji => kanji.match(/（/) === null);
					kanjisInPhrase.forEach(kanjiInPhrase => {
						if (higherGradesKanji.includes(kanjiInPhrase)) {
							notYetStudied.push([kanji, quiz.phrase, kanjiInPhrase]);
						}
					});
					higherGradesReading = higherGradesReading.map(elem => elem.replace(/（.+?）/g, ""));
					kanjisInPhrase.forEach(kanjiInPhrase => {
						if (higherGradesReading.includes(kanjiInPhrase)) {
							const phraseForCheck = quiz.phrase.map(text => {
								if (text.text) {
									return text.text;
								} else {
									return typeof text.answer === "object" ? text.answer.map(text2 => text2.text || text2.answer).join(",") : text.answer;
								}
							}).join(",");
							notYetStudiedReading[kanjiInPhrase].push([phraseForCheck, data.studyGrade || quiz.studyGrade]);
						}
					});
				}
				if (quiz.hasOkurigana === true) {
					var maxCharacterNum = 8;
				} else {
					var maxCharacterNum = 5;
				}
				textInSpecialReading += phrase;
				if (textInSpecialReading.length >= maxCharacterNum) {
					manyCharacter.push([kanji, quiz.phrase, `${maxCharacterNum}以上`]);
				}
			});
		});

		let notYetStudiedReadingText = "";
		Object.keys(jsonData).forEach(kanji => {
			notYetStudiedReadingText += [kanji, notYetStudiedReading[kanji].join("　")].join("\t") + "\n";
		});
		const problems = [
			{problem: sameStudyGrade, text: "別の読みでも同じ学習年の漢字"},
			{problem: notHasOkurigana, text: "送り仮名がない問題"},
			{problem: hasHiragana, text: "ひらがなが入っている問題"},
			{problem: manyAnswer, text: "答えが2文字以上ある問題"},
			{problem: manyCharacter, text: "文字が多い問題"},
			{problem: notYetStudiedReadingText, text: "まだ習っていないかもしれない読みがある問題"},
			{problem: notYetStudied, text: "まだ習っていないかもしれない漢字がある問題"},
			{problem: invalidData, text: "データに間違いがある漢字"},
		];
		problems.forEach(element => {
			console.log(element.text + ":");
			if (element.problem.length || Object.keys(element.problem).length) {
				console.log(element.problem);
			} else {
				console.log("ありませんでした");
			}
			console.log("");
			console.log("");
		});

		// 読みのデータ取得
		// const readingData = [];
		// Object.entries(jsonData).forEach(([kanji, data]) => {
		// 	const row = [];
		// 	row[0] = kanji;
		// 	const studyDatasReading = allGrades.reduce((acc, value) => {
		// 		acc[value] = [];
		// 		return acc;
		// 	}, {});
		// 	const studiedDatas = [];
		// 	if (data.readings) {
		// 		studiedDatas.push(...data.readings);
		// 	} else {
		// 		studiedDatas.push(data);
		// 	}
		// 	studiedDatas.forEach(elem => {
		// 		studyDatasReading[elem.studyGrade].push(elem);
		// 	});
		// 	Object.entries(studyDatasReading).forEach(([i, elem]) => {
		// 		if (elem.length === 0) {
		// 			row[i] = "";
		// 		} else {
		// 			elem.forEach(item => {
		// 				let readings = [];
		// 				if (item.reading) {
		// 					readings.push(item.reading);
		// 				} else {
		// 					// 初めに習った時の読み
		// 					item.quizzes.forEach(quiz => {
		// 						quiz.phrase.forEach(text => {
		// 							if (text.reading) {
		// 								readings.push(text.reading);
		// 							}
		// 						});
		// 					});
		// 				}
		// 				row[i] = [...new Set(readings)].join(",");
		// 			});

		// 		}
		// 	});
		// 	readingData.push(row.join("\t"));
		// });
		// console.log(readingData.join("\n"));

		// const notYetStudiedReading2 = Object.keys(jsonData).reduce((acc, value) => {
		// 	acc[value] = "";
		// 	return acc;
		// }, {});
		// const testData = {"手": "空,手,2　行く,手をはばむ,3　手,作り,2　手,紙,をかく,2　手,当て,する,2　苦,手なもの,3　手,軽,3　右手で,持つ,3　手本を,写す,3　切手を,集める,3　話し,相,手,3　手,相,を見る,3　手紙を,送る,3　手,帳,を買う,3　手の,皮,ふ,3　手,品,ショー,3","行": "見,学に行く,3　屋,上に行く,3　神,社に行く,3　他,へ行く,3　都,会に行く,3　問,やに行く,3","金": "さどの金,山,2　金,魚,2　合,計金がく,3　金,銀,どう,3　金,庫,の中,3　返,金します,3","気": "人,気がある,2　気が,引ける,2　元,気なこえ,2　元,気が出る,2　元,気になる,2　午,ごの天気,2　気が,合う,2　今,の気もち,2　気が,弱い,2　電,気をけす,2","海": "真っ,青,な海,3　海で,泳ぐ,3　真,夏の海,3　海の,深さ,3　海に,注ぐ,3　海の生,物,3","学": "町,立の学校,2　科,学の本,2　学校を見,回る,2　学校の,近く,2　学校に,行く,2","見": "目,じを見る,3　羽,を見せる,2　学校を見,回る,2　海,が見える,2　顔,を見せる,2　汽,車を見る,2　弓,を見る,2　近く,を見る,2　見,晴らし,がいい,2　前,を見る,2　こ,刀,を見る,2　野,鳥を見る,3　中,身,を見る,3　全く,見ない,3　手,相,を見る,3　新,緑,を見る,3","弱": "火,力,が弱い,3","子": "羽,子いた,3　五,才,の子,2　親,子,2　子犬が,育つ,3　親子の,対,話,3　子どもをせ,負う,3","白": "白い,雲,2　白い雲,海,3　白い花を,交ぜる,3　白い,馬,2　白い,米,つぶ,2　白,米,3　白,酒,3　真,っ白,3","休": "夏,休み,2　昼,休み,2　冬,休み,2　休み,期,間,3　緑,地で休む,3","中": "家,の中,2　心,の中,2　夜,中,2","入": "家,に入る,2　店,に入る,2　客,室に入る,3","青": "青い,海,2　青,葉,3","外": "海,外,3　意,外なこと,3　外国の文,化,3　外国の,詩,人,3","山": "山での生,活,2　たかい,岩,山,2　山へ,行く,2　高い,山,2　山,寺,2　山,道,2　野,山にいく,2　山,里,にすむ,2","生": "山での生,活,2","昼": "昼,間,3","通": "谷,間,を通る,3　き,待,通り,3　よ,定,通り,3　表,通り,3","音": "汽,てきの音,2　音が,聞こえる,2　音を,鳴らす,2","早": "早く,帰る,2　早足で,歩く,2　早,起き,する,3","先": "先に,帰す,2　先が,細る,2　矢,の先,2","毛": "黒毛わ,牛,3","小": "小さな,魚,2　小さな,池,2　小,指,のつめ,3　炭,やき小や,3","間": "時間を,計る,3　休み,期,間,3　書,写,の時間,3　世,間話,3　短,時間,3","名": "名まえを,言う,2　名,前,をかく,2","虫": "原,っぱの虫,2","正": "正,午,になる,2　正しい,答え,2　正たいを,明かす,2　正,面,をむく,3　礼,ぎ正しい,3","人": "公,へいな人,2　親しい,人,2　親,せつな人,2　しん,切,な人,2　人が,多い,2　多く,の人,2　人から,聞く,2","町": "町の,交,ばん,2","歌": "歌を話に,交ぜる,3　鼻,歌を歌う,3　鼻,歌を歌う,3　歌を,味わう,3","道": "道が,交わる,3　暗い,夜道,3　駅,前の道,3　道を,急ぐ,3　急,なさか道,3　さか道で,転ぶ,3　坂,道の上,3　平ら,な道,3　道の,両,がわ,3","力": "力を,高める,2　力を,合わす,2　新た,な力,3　力の,向,上,3　ぜん,身,の力,3　力が,問われる,3","計": "合,計金がく,3　七時を,指す,時計,3　計算の,式,3　計画を,練る,3","目": "一,週,目,2　二,丁,目,3　目を,配る,3　役,目がある,3　目,薬,をさす,3","円": "円の中,心,3　一,万,円さつ,2　円,柱,の形,3","心": "心,新た,に,3　心が,通う,3　心を,委ねる,3　温かい,心,3　心に,感,じる,3","空": "西,の空,2　星,空,2　空が,晴れる,2　空が,明るい,2","新": "新しい電,池,3　秋は新,米,3　新しい家,具,3　新しい空,港,3　全く,新しい,3　新しい時,代,3　新聞を,配る,3　新,発,ばい,3　新,緑,を見る,3","引": "直,線を引く,3　荷,車を引く,3","夜": "暗い,夜道,3","教": "水,泳,教室,3","場": "広場の中,央,3　工,事,げん場,3　広い場,所,3　明るい場,面,3","近": "近くの本,屋,3　身,近な人,3","直": "屋,ねを直す,3","内": "屋,内にいる,3　県,内の学校,3　校内,放,そう,3","船": "船のつみ,荷,3　ぎょ,港,の船,3　船,旅,3","地": "せ,界,地図,3　地,球,は回る,3　工,業,地たい,3　地,区,べつ,3　九,州,の地図,3　暑い,地いき,3　生,息,地,3　着,地する,3　地図,帳,3　地下,鉄,3　広い,農,地,3　地名の,由,来,3　遊,園地,3　山,陽,地方,3　緑,地で休む,3","朝": "寒い,朝,3","読": "漢,字を読む,3　漢,文を読む,3　神,話を読む,3　童,話を読む,3　本を読み,返す,3","歩": "かい,岸,歩き,3　川,岸,を歩く,3","多": "来,客,が多い,3　坂,が多い,3","石": "古い石,橋,3　軽い,石,3　石を,集める,3　重い,石,3　平たい,石,3","工": "工,業,地たい,3　工,事,げん場,3","田": "山田,君,3　田,畑,3","作": "記,号,を作る,3　詩,を作る,3　作,詩,する,3　作,者,3　文,集,を作る,3　作文の,題,名,3　短,文を作る,3　農,園を作る,3　作,品,を作る,3　作,品,を作る,3　作,物,をとる,3　遊,ぐを作る,3","語": "文の,主,語,3　国語の,学,習,3　えい語を,習う,3　落,語を聞く,3","売": "酒,を売る,3","食": "食べ,終わる,3","池": "池の水,深,3","形": "形を,整える,3　円,柱,の形,3","合": "息,が合う,3　待,合室,3","走": "走る,速さ,3","交": "交,代,する,3　国さい交,流,3","明": "明るい家,庭,3　明るい場,面,3","鳴": "汽,笛,が鳴る,3","風": "波,風が強い,3","強": "波,風が強い,3","光": "たい,陽,の光,3","言": "お,礼,を言う,3"};
		// Object.entries(testData).forEach(([key, value]) => {
		// 	notYetStudiedReading2[key] = value;
		// });
		// let notYetStudiedReadingText2 = "";
		// Object.keys(jsonData).forEach(kanji => {
		// 	notYetStudiedReadingText2 += [kanji, notYetStudiedReading2[kanji]].join("\t") + "\n";
		// });
		// console.log(notYetStudiedReadingText2);
	});
</script>