const url=new URL(location);let navLang=window.navigator.language;/en/.test(navLang)&&(navLang="en-us");const paraLang=url.searchParams.get("lang");let userLang=paraLang||navLang;const supportedLang=["ja","en-us"];function lang(){document.getElementsByTagName("html")[0].setAttribute("lang",userLang),document.title=document.getElementsByTagName("title")[0].getAttribute(`data-${userLang}`);const hideLang=supportedLang.filter(item=>userLang!==item),showLangElems=document.querySelectorAll(`[lang=${userLang}]`);for(let i=0;i<showLangElems.length;i++)showLangElems[i].removeAttribute("hidden");hideLang.forEach(item=>{const hideLangElems=document.querySelectorAll(`[lang=${item}]`);for(let i=0;i<hideLangElems.length;i++)hideLangElems[i].setAttribute("hidden","")})}function addRemovePara(){const aE=document.querySelectorAll("a:not([target])");for(let i=0;i<aE.length;i++)aE[i].setAttribute("href",location.search?aE[i].getAttribute("href")+location.search:aE[i].getAttribute("href").replace(/\?.+/,""))}const hamburger=document.getElementById("hamburger"),nav=document.getElementsByTagName("nav")[0],siteName=document.getElementById("siteName"),mainAndFooter=document.querySelectorAll("nav ~ *");function toggleMenu(){hamburger.classList.toggle("checked"),nav.classList.toggle("hide"),nav.querySelectorAll("[tabindex]").forEach(e=>{e.setAttribute("tabindex",nav.classList.contains("hide")?-1:0)}),mainAndFooter.forEach(parent=>{parent.querySelectorAll("[tabindex], a, input, button").forEach(e=>{e.setAttribute("tabindex",nav.classList.contains("hide")?0:-1)})}),siteName.classList.toggle("hide")}hamburger.addEventListener("click",toggleMenu),hamburger.addEventListener("keydown",e=>{"Enter"===e.key&&toggleMenu()});const selectLangE=document.getElementsByName("selectLang");for(let i=0;i<selectLangE.length;i++){const element=selectLangE[i];element.value===userLang&&(element.checked=!0),element.addEventListener("change",()=>{userLang=element.value,navLang===userLang||url.searchParams.has("lang")?paraLang!==userLang&&(url.searchParams.delete("lang"),history.replaceState(null,null,url.toString())):(url.searchParams.append("lang",userLang),history.replaceState(null,null,url.toString())),toggleMenu(),lang(),addRemovePara()})}lang(),addRemovePara();